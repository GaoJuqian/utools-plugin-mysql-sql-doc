<!DOCTYPE html>
<html lang="zh-Hant-CN">
<head>
<meta charset="UTF-8">
<title>ALTER USER StatementALTER USER OverviewALTER USER Authentication OptionsALTER USER SSL/TLS OptionsALTER USER Resource-Limit OptionsALTER USER Password-Management OptionsALTER USER Account-Locking Options</title>
<link href="../docs.css" rel="stylesheet">
</head>
<body>

        
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="alter-user"></a>13.7.1.1&nbsp;ALTER USER Statement</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm45852574041920"></a><a class="indexterm" name="idm45852574040848"></a><a class="indexterm" name="idm45852574039360"></a><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER [IF EXISTS]
    <em class="replaceable">user</em> [<em class="replaceable">auth_option</em>] [, <em class="replaceable">user</em> [<em class="replaceable">auth_option</em>]] ...
    [REQUIRE {NONE | <em class="replaceable">tls_option</em> [[AND] <em class="replaceable">tls_option</em>] ...}]
    [WITH <em class="replaceable">resource_option</em> [<em class="replaceable">resource_option</em>] ...]
    [<em class="replaceable">password_option</em> | <em class="replaceable">lock_option</em>] ...

ALTER USER [IF EXISTS]
    USER() IDENTIFIED BY '<em class="replaceable">auth_string</em>'

<em class="replaceable">user</em>:
    (see Section&nbsp;6.2.4, “Specifying Account Names”)

<em class="replaceable">auth_option</em>: {
    IDENTIFIED BY '<em class="replaceable">auth_string</em>'
  | IDENTIFIED WITH <em class="replaceable">auth_plugin</em>
  | IDENTIFIED WITH <em class="replaceable">auth_plugin</em> BY '<em class="replaceable">auth_string</em>'
  | IDENTIFIED WITH <em class="replaceable">auth_plugin</em> AS '<em class="replaceable">auth_string</em>'
}

<em class="replaceable">tls_option</em>: {
   SSL
 | X509
 | CIPHER '<em class="replaceable">cipher</em>'
 | ISSUER '<em class="replaceable">issuer</em>'
 | SUBJECT '<em class="replaceable">subject</em>'
}

<em class="replaceable">resource_option</em>: {
    MAX_QUERIES_PER_HOUR <em class="replaceable">count</em>
  | MAX_UPDATES_PER_HOUR <em class="replaceable">count</em>
  | MAX_CONNECTIONS_PER_HOUR <em class="replaceable">count</em>
  | MAX_USER_CONNECTIONS <em class="replaceable">count</em>
}

<em class="replaceable">password_option</em>: {
    PASSWORD EXPIRE
  | PASSWORD EXPIRE DEFAULT
  | PASSWORD EXPIRE NEVER
  | PASSWORD EXPIRE INTERVAL <em class="replaceable">N</em> DAY
}

<em class="replaceable">lock_option</em>: {
    ACCOUNT LOCK
  | ACCOUNT UNLOCK
}</code></pre><p>
        The <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> statement modifies
        MySQL accounts. It enables authentication, SSL/TLS,
        resource-limit, and password-management properties to be
        modified for existing accounts. It can also be used to lock and
        unlock accounts.
      </p><p>
        To use <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a>, you must have
        the global <a class="link" href="privileges-provided.html#priv_create-user"><code class="literal">CREATE USER</code></a> privilege
        or the <a class="link" href="privileges-provided.html#priv_update"><code class="literal">UPDATE</code></a> privilege for the
        <code class="literal">mysql</code> system database. When the
        <a class="link" href="server-system-variables.html#sysvar_read_only"><code class="literal">read_only</code></a> system variable is
        enabled, <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> additionally
        requires the <a class="link" href="privileges-provided.html#priv_super"><code class="literal">SUPER</code></a> privilege.
      </p><p>
        By default, an error occurs if you try to modify a user that
        does not exist. If the <code class="literal">IF EXISTS</code> clause is
        given, the statement produces a warning for each named user that
        does not exist, rather than an error.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
          Under some circumstances, <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER
          USER</code></a> may be recorded in server logs or on the client
          side in a history file such as
          <code class="filename">~/.mysql_history</code>, which means that
          cleartext passwords may be read by anyone having read access
          to that information. For information about the conditions
          under which this occurs for the server logs and how to control
          it, see <a class="xref" href="password-logging.html" title="6.1.2.3&nbsp;Passwords and Logging">Section&nbsp;6.1.2.3, “Passwords and Logging”</a>. For similar
          information about client-side logging, see
          <a class="xref" href="mysql-logging.html" title="4.5.1.3&nbsp;mysql Client Logging">Section&nbsp;4.5.1.3, “mysql Client Logging”</a>.
</p>
</div>
<p>
        There are several aspects to the <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER
        USER</code></a> statement, described under the following topics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="alter-user.html#alter-user-overview" title="ALTER USER Overview">ALTER USER Overview</a></p></li><li class="listitem"><p><a class="xref" href="alter-user.html#alter-user-authentication" title="ALTER USER Authentication Options">ALTER USER Authentication Options</a></p></li><li class="listitem"><p><a class="xref" href="alter-user.html#alter-user-tls" title="ALTER USER SSL/TLS Options">ALTER USER SSL/TLS Options</a></p></li><li class="listitem"><p><a class="xref" href="alter-user.html#alter-user-resource-limits" title="ALTER USER Resource-Limit Options">ALTER USER Resource-Limit Options</a></p></li><li class="listitem"><p><a class="xref" href="alter-user.html#alter-user-password-management" title="ALTER USER Password-Management Options">ALTER USER Password-Management Options</a></p></li><li class="listitem"><p><a class="xref" href="alter-user.html#alter-user-account-locking" title="ALTER USER Account-Locking Options">ALTER USER Account-Locking Options</a></p></li></ul>
</div>

<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="alter-user-overview"></a>ALTER USER Overview</h5>

</div>

</div>

</div>
<p>
          For each affected account, <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER
          USER</code></a> modifies the corresponding row in the
          <code class="literal">mysql.user</code> system table to reflect the
          properties specified in the statement. Unspecified properties
          retain their current values.
        </p><p>
          Each account name uses the format described in
          <a class="xref" href="account-names.html" title="6.2.4&nbsp;Specifying Account Names">Section&nbsp;6.2.4, “Specifying Account Names”</a>. The host name part of the
          account name, if omitted, defaults to <code class="literal">'%'</code>.
          It is also possible to specify
          <a class="link" href="information-functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> or
          <a class="link" href="information-functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> to refer to the
          account associated with the current session.
        </p><p>
          For one syntax only, the account may be specified with the
          <a class="link" href="information-functions.html#function_user"><code class="literal">USER()</code></a> function:
        </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER USER() IDENTIFIED BY '<em class="replaceable">auth_string</em>';</code></pre><p>
          This syntax enables changing your own password without naming
          your account literally.
        </p><p>
          For <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> syntax that
          permits an <em class="replaceable"><code>auth_option</code></em> value to
          follow a <em class="replaceable"><code>user</code></em> value,
          <em class="replaceable"><code>auth_option</code></em> indicates how the
          account authenticates by specifying an account authentication
          plugin, credentials (for example, a password), or both. Each
          <em class="replaceable"><code>auth_option</code></em> value applies
          <span class="emphasis"><em>only</em></span> to the account named immediately
          preceding it.
        </p><p>
          Following the <em class="replaceable"><code>user</code></em> specifications,
          the statement may include options for SSL/TLS, resource-limit,
          password-management, and locking properties. All such options
          are <span class="emphasis"><em>global</em></span> to the statement and apply to
          <span class="emphasis"><em>all</em></span> accounts named in the statement.
        </p><p>
          Example: Change an account's password and expire it. As a
          result, the user must connect with the named password and
          choose a new one at the next connection:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  IDENTIFIED BY '<em class="replaceable">new_password</em>' PASSWORD EXPIRE;</code></pre><p>
          Example: Modify an account to use the
          <code class="literal">sha256_password</code> authentication plugin and
          the given password. Require that a new password be chosen
          every 180 days:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  IDENTIFIED WITH sha256_password BY '<em class="replaceable">new_password</em>'
  PASSWORD EXPIRE INTERVAL 180 DAY;</code></pre><p>
          Example: Lock or unlock an account:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' ACCOUNT LOCK;
ALTER USER 'jeffrey'@'localhost' ACCOUNT UNLOCK;</code></pre><p>
          Example: Require an account to connect using SSL and establish
          a limit of 20 connections per hour:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  REQUIRE SSL WITH MAX_CONNECTIONS_PER_HOUR 20;</code></pre><p>
          Example: Alter multiple accounts, specifying some per-account
          properties and some global properties:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER
  'jeffrey'@'localhost' IDENTIFIED BY '<em class="replaceable">new_password</em>',
  'jeanne'@'localhost'
  REQUIRE SSL WITH MAX_USER_CONNECTIONS 2;</code></pre><p>
          The <code class="literal">IDENTIFIED BY</code> value following
          <code class="literal">jeffrey</code> applies only to its immediately
          preceding account, so it changes the password to
          <code class="literal">'<em class="replaceable"><code>jeffrey_new_password</code></em>'</code>
          only for <code class="literal">jeffrey</code>. For
          <code class="literal">jeanne</code>, there is no per-account value (thus
          leaving the password unchanged).
        </p><p>
          The remaining properties apply globally to all accounts named
          in the statement, so for both accounts:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Connections are required to use SSL.
            </p></li><li class="listitem"><p>
              The account can be used for a maximum of two simultaneous
              connections.
</p></li></ul>
</div>
<p>
          In the absence of a particular type of option, the account
          remains unchanged in that respect. For example, with no
          locking option, the locking state of the account is not
          changed.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="alter-user-authentication"></a>ALTER USER Authentication Options</h5>

</div>

</div>

</div>
<p>
          An account name may be followed by an
          <em class="replaceable"><code>auth_option</code></em> authentication option
          that specifies the account authentication plugin, credentials,
          or both:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <em class="replaceable"><code>auth_plugin</code></em> names an
              authentication plugin. The plugin name can be a quoted
              string literal or an unquoted name. Plugin names are
              stored in the <code class="literal">plugin</code> column of the
              <code class="literal">mysql.user</code> system table.
            </p><p>
              For <em class="replaceable"><code>auth_option</code></em> syntax that
              does not specify an authentication plugin, the default
              plugin is indicated by the value of the
              <a class="link" href="server-system-variables.html#sysvar_default_authentication_plugin"><code class="literal">default_authentication_plugin</code></a>
              system variable. For descriptions of each plugin, see
              <a class="xref" href="authentication-plugins.html" title="6.4.1&nbsp;Authentication Plugins">Section&nbsp;6.4.1, “Authentication Plugins”</a>.
            </p></li><li class="listitem"><p>
              Credentials are stored in the
              <code class="literal">mysql.user</code> system table. An
              <code class="literal">'<em class="replaceable"><code>auth_string</code></em>'</code>
              value specifies account credentials, either as a cleartext
              (unencrypted) string or hashed in the format expected by
              the authentication plugin associated with the account,
              respectively:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  For syntax that uses <code class="literal">BY
                  '<em class="replaceable"><code>auth_string</code></em>'</code>,
                  the string is cleartext and is passed to the
                  authentication plugin for possible hashing. The result
                  returned by the plugin is stored in the
                  <code class="literal">mysql.user</code> table. A plugin may use
                  the value as specified, in which case no hashing
                  occurs.
                </p></li><li class="listitem"><p>
                  For syntax that uses <code class="literal">AS
                  '<em class="replaceable"><code>auth_string</code></em>'</code>,
                  the string is assumed to be already in the format the
                  authentication plugin requires, and is stored as is in
                  the <code class="literal">mysql.user</code> table. If a plugin
                  requires a hashed value, the value must be already
                  hashed in a format appropriate for the plugin, or the
                  value cannot be used by the plugin and correct
                  authentication of client connections cannot occur.
                </p></li><li class="listitem"><p>
                  If an authentication plugin performs no hashing of the
                  authentication string, the <code class="literal">BY
                  '<em class="replaceable"><code>auth_string</code></em>'</code> and
                  <code class="literal">AS
                  '<em class="replaceable"><code>auth_string</code></em>'</code>
                  clauses have the same effect: The authentication
                  string is stored as is in the
                  <code class="literal">mysql.user</code> system table.
</p></li></ul>
</div>
</li></ul>
</div>
<p>
          <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> permits these
          <em class="replaceable"><code>auth_option</code></em> syntaxes:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">IDENTIFIED BY
              '<em class="replaceable"><code>auth_string</code></em>'</code>
            </p><p>
              Sets the account authentication plugin to the default
              plugin, passes the cleartext
              <code class="literal">'<em class="replaceable"><code>auth_string</code></em>'</code>
              value to the plugin for possible hashing, and stores the
              result in the account row in the
              <code class="literal">mysql.user</code> system table.
            </p></li><li class="listitem"><p>
              <code class="literal">IDENTIFIED WITH
              <em class="replaceable"><code>auth_plugin</code></em></code>
            </p><p>
              Sets the account authentication plugin to
              <em class="replaceable"><code>auth_plugin</code></em>, clears the
              credentials to the empty string (the credentials are
              associated with the old authentication plugin, not the new
              one), and stores the result in the account row in the
              <code class="literal">mysql.user</code> system table.
            </p><p>
              In addition, the password is marked expired. The user must
              choose a new one when next connecting.
            </p></li><li class="listitem"><p>
              <code class="literal">IDENTIFIED WITH
              <em class="replaceable"><code>auth_plugin</code></em> BY
              '<em class="replaceable"><code>auth_string</code></em>'</code>
            </p><p>
              Sets the account authentication plugin to
              <em class="replaceable"><code>auth_plugin</code></em>, passes the
              cleartext
              <code class="literal">'<em class="replaceable"><code>auth_string</code></em>'</code>
              value to the plugin for possible hashing, and stores the
              result in the account row in the
              <code class="literal">mysql.user</code> system table.
            </p></li><li class="listitem"><p>
              <code class="literal">IDENTIFIED WITH
              <em class="replaceable"><code>auth_plugin</code></em> AS
              '<em class="replaceable"><code>auth_string</code></em>'</code>
            </p><p>
              Sets the account authentication plugin to
              <em class="replaceable"><code>auth_plugin</code></em> and stores the
              <code class="literal">'<em class="replaceable"><code>auth_string</code></em>'</code>
              value as is in the <code class="literal">mysql.user</code> account
              row. If the plugin requires a hashed string, the string is
              assumed to be already hashed in the format the plugin
              requires.
</p></li></ul>
</div>
<p>
          Example: Specify the password as cleartext; the default plugin
          is used:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  IDENTIFIED BY '<em class="replaceable">password</em>';</code></pre><p>
          Example: Specify the authentication plugin, along with a
          cleartext password value:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  IDENTIFIED WITH mysql_native_password
             BY '<em class="replaceable">password</em>';</code></pre><p>
          Example: Specify the authentication plugin, along with a
          hashed password value:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  IDENTIFIED WITH mysql_native_password
             AS '*6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4';</code></pre><p>
          For additional information about setting passwords and
          authentication plugins, see
          <a class="xref" href="assigning-passwords.html" title="6.2.10&nbsp;Assigning Account Passwords">Section&nbsp;6.2.10, “Assigning Account Passwords”</a>, and
          <a class="xref" href="pluggable-authentication.html" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="alter-user-tls"></a>ALTER USER SSL/TLS Options</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm45852573906512"></a><a class="indexterm" name="idm45852573905056"></a><a class="indexterm" name="idm45852573903568"></a><p>
          MySQL can check X.509 certificate attributes in addition to
          the usual authentication that is based on the user name and
          credentials. For background information on the use of SSL/TLS
          with MySQL, see <a class="xref" href="encrypted-connections.html" title="6.3&nbsp;Using Encrypted Connections">Section&nbsp;6.3, “Using Encrypted Connections”</a>.
        </p><p>
          To specify SSL/TLS-related options for a MySQL account, use a
          <code class="literal">REQUIRE</code> clause that specifies one or more
          <em class="replaceable"><code>tls_option</code></em> values.
        </p><p>
          Order of <code class="literal">REQUIRE</code> options does not matter,
          but no option can be specified twice. The
          <code class="literal">AND</code> keyword is optional between
          <code class="literal">REQUIRE</code> options.
        </p><p>
          <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> permits these
          <em class="replaceable"><code>tls_option</code></em> values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NONE</code>
            </p><p>
              Indicates that all accounts named by the statement have no
              SSL or X.509 requirements. Unencrypted connections are
              permitted if the user name and password are valid.
              Encrypted connections can be used, at the client's option,
              if the client has the proper certificate and key files.
            </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' REQUIRE NONE;</code></pre><p>
              Clients attempt to establish a secure connection by
              default. For clients that have <code class="literal">REQUIRE
              NONE</code>, the connection attempt falls back to an
              unencrypted connection if a secure connection cannot be
              established. To require an encrypted connection, a client
              need specify only the
              <a class="link" href="connection-options.html#option_general_ssl-mode"><code class="option">--ssl-mode=REQUIRED</code></a>
              option; the connection attempt fails if a secure
              connection cannot be established.
            </p></li><li class="listitem"><p>
              <code class="literal">SSL</code>
            </p><p>
              Tells the server to permit only encrypted connections for
              all accounts named by the statement.
            </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' REQUIRE SSL;</code></pre><p>
              Clients attempt to establish a secure connection by
              default. For accounts that have <code class="literal">REQUIRE
              SSL</code>, the connection attempt fails if a secure
              connection cannot be established.
            </p></li><li class="listitem"><p>
              <code class="literal">X509</code>
            </p><p>
              For all accounts named by the statement, requires that
              clients present a valid certificate, but the exact
              certificate, issuer, and subject do not matter. The only
              requirement is that it should be possible to verify its
              signature with one of the CA certificates. Use of X.509
              certificates always implies encryption, so the
              <code class="literal">SSL</code> option is unnecessary in this case.
            </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' REQUIRE X509;</code></pre><p>
              For accounts with <code class="literal">REQUIRE X509</code>, clients
              must specify the <a class="link" href="connection-options.html#option_general_ssl-key"><code class="option">--ssl-key</code></a>
              and <a class="link" href="connection-options.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> options to
              connect. (It is recommended but not required that
              <a class="link" href="connection-options.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> also be specified
              so that the public certificate provided by the server can
              be verified.) This is true for <code class="literal">ISSUER</code>
              and <code class="literal">SUBJECT</code> as well because those
              <code class="literal">REQUIRE</code> options imply the requirements
              of <code class="literal">X509</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">ISSUER
              '<em class="replaceable"><code>issuer</code></em>'</code>
            </p><p>
              For all accounts named by the statement, requires that
              clients present a valid X.509 certificate issued by CA
              <code class="literal">'<em class="replaceable"><code>issuer</code></em>'</code>. If
              a client presents a certificate that is valid but has a
              different issuer, the server rejects the connection. Use
              of X.509 certificates always implies encryption, so the
              <code class="literal">SSL</code> option is unnecessary in this case.
            </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  REQUIRE ISSUER '/C=SE/ST=Stockholm/L=Stockholm/
    O=MySQL/CN=CA/emailAddress=ca@example.com';</code></pre><p>
              Because <code class="literal">ISSUER</code> implies the requirements
              of <code class="literal">X509</code>, clients must specify the
              <a class="link" href="connection-options.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> and
              <a class="link" href="connection-options.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> options to
              connect. (It is recommended but not required that
              <a class="link" href="connection-options.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> also be specified
              so that the public certificate provided by the server can
              be verified.)
            </p></li><li class="listitem"><p>
              <code class="literal">SUBJECT
              '<em class="replaceable"><code>subject</code></em>'</code>
            </p><p>
              For all accounts named by the statement, requires that
              clients present a valid X.509 certificate containing the
              subject <em class="replaceable"><code>subject</code></em>. If a client
              presents a certificate that is valid but has a different
              subject, the server rejects the connection. Use of X.509
              certificates always implies encryption, so the
              <code class="literal">SSL</code> option is unnecessary in this case.
            </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  REQUIRE SUBJECT '/C=SE/ST=Stockholm/L=Stockholm/
    O=MySQL demo client certificate/
    CN=client/emailAddress=client@example.com';</code></pre><p>
              MySQL does a simple string comparison of the
              <code class="literal">'<em class="replaceable"><code>subject</code></em>'</code>
              value to the value in the certificate, so lettercase and
              component ordering must be given exactly as present in the
              certificate.
            </p><p>
              Because <code class="literal">SUBJECT</code> implies the
              requirements of <code class="literal">X509</code>, clients must
              specify the <a class="link" href="connection-options.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> and
              <a class="link" href="connection-options.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> options to
              connect. (It is recommended but not required that
              <a class="link" href="connection-options.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> also be specified
              so that the public certificate provided by the server can
              be verified.)
            </p></li><li class="listitem"><p>
              <code class="literal">CIPHER
              '<em class="replaceable"><code>cipher</code></em>'</code>
            </p><p>
              For all accounts named by the statement, requires a
              specific cipher method for encrypting connections. This
              option is needed to ensure that ciphers and key lengths of
              sufficient strength are used. Encryption can be weak if
              old algorithms using short encryption keys are used.
            </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  REQUIRE CIPHER 'EDH-RSA-DES-CBC3-SHA';</code></pre></li></ul>
</div>
<p>
          The <code class="literal">SUBJECT</code>, <code class="literal">ISSUER</code>, and
          <code class="literal">CIPHER</code> options can be combined in the
          <code class="literal">REQUIRE</code> clause:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  REQUIRE SUBJECT '/C=SE/ST=Stockholm/L=Stockholm/
    O=MySQL demo client certificate/
    CN=client/emailAddress=client@example.com'
  AND ISSUER '/C=SE/ST=Stockholm/L=Stockholm/
    O=MySQL/CN=CA/emailAddress=ca@example.com'
  AND CIPHER 'EDH-RSA-DES-CBC3-SHA';</code></pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="alter-user-resource-limits"></a>ALTER USER Resource-Limit Options</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm45852573840928"></a><a class="indexterm" name="idm45852573839440"></a><p>
          It is possible to place limits on use of server resources by
          an account, as discussed in <a class="xref" href="user-resources.html" title="6.2.16&nbsp;Setting Account Resource Limits">Section&nbsp;6.2.16, “Setting Account Resource Limits”</a>.
          To do so, use a <code class="literal">WITH</code> clause that specifies
          one or more <em class="replaceable"><code>resource_option</code></em> values.
        </p><p>
          Order of <code class="literal">WITH</code> options does not matter,
          except that if a given resource limit is specified multiple
          times, the last instance takes precedence.
        </p><p>
          <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> permits these
          <em class="replaceable"><code>resource_option</code></em> values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">MAX_QUERIES_PER_HOUR
              <em class="replaceable"><code>count</code></em></code>,
              <code class="literal">MAX_UPDATES_PER_HOUR
              <em class="replaceable"><code>count</code></em></code>,
              <code class="literal">MAX_CONNECTIONS_PER_HOUR
              <em class="replaceable"><code>count</code></em></code>
            </p><p>
              For all accounts named by the statement, these options
              restrict how many queries, updates, and connections to the
              server are permitted to each account during any given
              one-hour period. (Queries for which results are served
              from the query cache do not count against the
              <code class="literal">MAX_QUERIES_PER_HOUR</code> limit.) If
              <em class="replaceable"><code>count</code></em> is <code class="literal">0</code>
              (the default), this means that there is no limitation for
              the account.
            </p></li><li class="listitem"><p>
              <code class="literal">MAX_USER_CONNECTIONS
              <em class="replaceable"><code>count</code></em></code>
            </p><p>
              For all accounts named by the statement, restricts the
              maximum number of simultaneous connections to the server
              by each account. A nonzero
              <em class="replaceable"><code>count</code></em> specifies the limit for
              the account explicitly. If
              <em class="replaceable"><code>count</code></em> is <code class="literal">0</code>
              (the default), the server determines the number of
              simultaneous connections for the account from the global
              value of the
              <a class="link" href="server-system-variables.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a>
              system variable. If
              <a class="link" href="server-system-variables.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> is
              also zero, there is no limit for the account.
</p></li></ul>
</div>
<p>
          Example:
        </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">ALTER USER 'jeffrey'@'localhost'
  WITH MAX_QUERIES_PER_HOUR 500 MAX_UPDATES_PER_HOUR 100;</code></pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="alter-user-password-management"></a>ALTER USER Password-Management Options</h5>

</div>

</div>

</div>
<p>
          <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> supports several
          <em class="replaceable"><code>password_option</code></em> values for password
          expiration management, to either expire an account password
          manually or establish its password expiration policy. Policy
          options do not expire the password. Instead, they determine
          how the server applies automatic expiration to the account
          based on account password age. For a given account, its
          password age is assessed from the date and time of the most
          recent password change.
        </p><p>
          This section describes the syntax for password-management
          options. For information about establishing policy for
          password management, see
          <a class="xref" href="password-management.html" title="6.2.11&nbsp;Password Management">Section&nbsp;6.2.11, “Password Management”</a>.
        </p><p>
          If multiple password-management options are specified, the
          last one takes precedence.
        </p><p>
          These options apply only to accounts that use an
          authentication plugin that stores credentials internally to
          MySQL. For accounts that use a plugin that performs
          authentication against a credentials system that is external
          to MySQL, password management must be handled externally
          against that system as well. For more information about
          internal credentials storage, see
          <a class="xref" href="password-management.html" title="6.2.11&nbsp;Password Management">Section&nbsp;6.2.11, “Password Management”</a>.
        </p><p>
          A client session operates in restricted mode if the account
          password was expired manually or if the password age is
          considered greater than its permitted lifetime per the
          automatic expiration policy. In restricted mode, operations
          performed within the session result in an error until the user
          establishes a new account password. For information about
          restricted mode, see
          <a class="xref" href="expired-password-handling.html" title="6.2.12&nbsp;Server Handling of Expired Passwords">Section&nbsp;6.2.12, “Server Handling of Expired Passwords”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Although it is possible to <span class="quote">“<span class="quote">reset</span>”</span> an expired
            password by setting it to its current value, it is
            preferable, as a matter of good policy, to choose a
            different password.
</p>
</div>
<p>
          <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> permits these
          <em class="replaceable"><code>password_option</code></em> values for
          controlling password expiration:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">PASSWORD EXPIRE</code>
            </p><p>
              Immediately marks the password expired for all accounts
              named by the statement.
            </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE;</code></pre></li><li class="listitem"><p>
              <code class="literal">PASSWORD EXPIRE DEFAULT</code>
            </p><p>
              Sets all accounts named by the statement so that the
              global expiration policy applies, as specified by the
              <a class="link" href="server-system-variables.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
              system variable.
            </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE DEFAULT;</code></pre></li><li class="listitem"><p>
              <code class="literal">PASSWORD EXPIRE NEVER</code>
            </p><p>
              This expiration option overrides the global policy for all
              accounts named by the statement. For each, it disables
              password expiration so that the password never expires.
            </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE NEVER;</code></pre></li><li class="listitem"><p>
              <code class="literal">PASSWORD EXPIRE INTERVAL
              <em class="replaceable"><code>N</code></em> DAY</code>
            </p><p>
              This expiration option overrides the global policy for all
              accounts named by the statement. For each, it sets the
              password lifetime to <em class="replaceable"><code>N</code></em> days.
              The following statement requires the password to be
              changed every 180 days:
            </p><pre class="programlisting copytoclipboard language-sql one-line"><code class="language-sql">ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE INTERVAL 180 DAY;</code></pre></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="alter-user-account-locking"></a>ALTER USER Account-Locking Options</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm45852573788912"></a><p>
          MySQL supports account locking and unlocking using the
          <code class="literal">ACCOUNT LOCK</code> and <code class="literal">ACCOUNT
          UNLOCK</code> options, which specify the locking state for
          an account. For additional discussion, see
          <a class="xref" href="account-locking.html" title="6.2.15&nbsp;Account Locking">Section&nbsp;6.2.15, “Account Locking”</a>.
        </p><p>
          If multiple account-locking options are specified, the last
          one takes precedence.
</p>
</div>

</div>
<br>
        
</body>
</html>