<!DOCTYPE html>
<html lang="zh-Hant-CN">
<head>
<meta charset="UTF-8">
<title>SHOW WARNINGS Statement</title>
<link href="../docs.css" rel="stylesheet">
</head>
<body>

        
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="show-warnings"></a>13.7.5.40&nbsp;SHOW WARNINGS Statement</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm45852569498928"></a><a class="indexterm" name="idm45852569497856"></a><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">SHOW WARNINGS [LIMIT [<em class="replaceable">offset</em>,] <em class="replaceable">row_count</em>]
SHOW COUNT(*) WARNINGS</code></pre><p>
        <a class="link" href="show-warnings.html" title="13.7.5.40&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW WARNINGS</code></a> is a diagnostic
        statement that displays information about the conditions
        (errors, warnings, and notes) resulting from executing a
        statement in the current session. Warnings are generated for DML
        statements such as <a class="link" href="insert.html" title="13.2.5&nbsp;INSERT Statement"><code class="literal">INSERT</code></a>,
        <a class="link" href="update.html" title="13.2.11&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a>, and
        <a class="link" href="load-data.html" title="13.2.6&nbsp;LOAD DATA Statement"><code class="literal">LOAD DATA</code></a> as well as DDL
        statements such as <a class="link" href="create-table.html" title="13.1.18&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE</code></a>
        and <a class="link" href="alter-table.html" title="13.1.8&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a>.
      </p><p>
        The <code class="literal">LIMIT</code> clause has the same syntax as for
        the <a class="link" href="select.html" title="13.2.9&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> statement. See
        <a class="xref" href="select.html" title="13.2.9&nbsp;SELECT Statement">Section&nbsp;13.2.9, “SELECT Statement”</a>.
      </p><p>
        <a class="link" href="show-warnings.html" title="13.7.5.40&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW WARNINGS</code></a> is also used
        following <a class="link" href="explain.html" title="13.8.2&nbsp;EXPLAIN Statement"><code class="literal">EXPLAIN</code></a>, to display the
        extended information generated by
        <a class="link" href="explain.html" title="13.8.2&nbsp;EXPLAIN Statement"><code class="literal">EXPLAIN</code></a>. See
        <a class="xref" href="explain-extended.html" title="8.8.3&nbsp;Extended EXPLAIN Output Format">Section&nbsp;8.8.3, “Extended EXPLAIN Output Format”</a>.
      </p><p>
        <a class="link" href="show-warnings.html" title="13.7.5.40&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW WARNINGS</code></a> displays
        information about the conditions resulting from execution of the
        most recent nondiagnostic statement in the current session. If
        the most recent statement resulted in an error during parsing,
        <a class="link" href="show-warnings.html" title="13.7.5.40&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW WARNINGS</code></a> shows the resulting
        conditions, regardless of statement type (diagnostic or
        nondiagnostic).
      </p><p>
        The <a class="link" href="show-warnings.html" title="13.7.5.40&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW COUNT(*)
        WARNINGS</code></a> diagnostic statement displays the total
        number of errors, warnings, and notes. You can also retrieve
        this number from the
        <a class="link" href="server-system-variables.html#sysvar_warning_count"><code class="literal">warning_count</code></a> system variable:
      </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">SHOW COUNT(*) WARNINGS;
SELECT @@warning_count;</code></pre><p>
        A difference in these statements is that the first is a
        diagnostic statement that does not clear the message list. The
        second, because it is a <a class="link" href="select.html" title="13.2.9&nbsp;SELECT Statement"><code class="literal">SELECT</code></a>
        statement is considered nondiagnostic and does clear the message
        list.
      </p><p>
        A related diagnostic statement, <a class="link" href="show-errors.html" title="13.7.5.17&nbsp;SHOW ERRORS Statement"><code class="literal">SHOW
        ERRORS</code></a>, shows only error conditions (it excludes
        warnings and notes), and
        <a class="link" href="show-warnings.html" title="13.7.5.40&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW COUNT(*)
        ERRORS</code></a> statement displays the total number of errors.
        See <a class="xref" href="show-errors.html" title="13.7.5.17&nbsp;SHOW ERRORS Statement">Section&nbsp;13.7.5.17, “SHOW ERRORS Statement”</a>. <a class="link" href="get-diagnostics.html" title="13.6.7.3&nbsp;GET DIAGNOSTICS Statement"><code class="literal">GET
        DIAGNOSTICS</code></a> can be used to examine information for
        individual conditions. See <a class="xref" href="get-diagnostics.html" title="13.6.7.3&nbsp;GET DIAGNOSTICS Statement">Section&nbsp;13.6.7.3, “GET DIAGNOSTICS Statement”</a>.
      </p><p>
        Here is a simple example that shows data-conversion warnings for
        <a class="link" href="insert.html" title="13.2.5&nbsp;INSERT Statement"><code class="literal">INSERT</code></a>. The example assumes that
        strict SQL mode is disabled. With strict mode enabled, the
        warnings would become errors and terminate the
        <a class="link" href="insert.html" title="13.2.5&nbsp;INSERT Statement"><code class="literal">INSERT</code></a>.
      </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql&gt; CREATE TABLE t1 (a TINYINT NOT NULL, b CHAR(4));
Query OK, 0 rows affected (0.05 sec)

mysql&gt; INSERT INTO t1 VALUES(10,'mysql'), (NULL,'test'), (300,'xyz');
Query OK, 3 rows affected, 3 warnings (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 3

mysql&gt; SHOW WARNINGS\G
*************************** 1. row ***************************
  Level: Warning
   Code: 1265
Message: Data truncated for column 'b' at row 1
*************************** 2. row ***************************
  Level: Warning
   Code: 1048
Message: Column 'a' cannot be null
*************************** 3. row ***************************
  Level: Warning
   Code: 1264
Message: Out of range value for column 'a' at row 3
3 rows in set (0.00 sec)</code></pre><p>
        The <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> system
        variable controls the maximum number of error, warning, and note
        messages for which the server stores information, and thus the
        number of messages that <a class="link" href="show-warnings.html" title="13.7.5.40&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW
        WARNINGS</code></a> displays. To change the number of messages
        the server can store, change the value of
        <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a>. The default is
        64.
      </p><p>
        <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> controls only
        how many messages are stored, not how many are counted. The
        value of <a class="link" href="server-system-variables.html#sysvar_warning_count"><code class="literal">warning_count</code></a> is not
        limited by <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a>,
        even if the number of messages generated exceeds
        <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a>. The following
        example demonstrates this. The <a class="link" href="alter-table.html" title="13.1.8&nbsp;ALTER TABLE Statement"><code class="literal">ALTER
        TABLE</code></a> statement produces three warning messages
        (strict SQL mode is disabled for the example to prevent an error
        from occuring after a single conversion issue). Only one message
        is stored and displayed because
        <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> has been set to
        1, but all three are counted (as shown by the value of
        <a class="link" href="server-system-variables.html#sysvar_warning_count"><code class="literal">warning_count</code></a>):
      </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql&gt; SHOW VARIABLES LIKE 'max_error_count';
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| max_error_count | 64    |
+-----------------+-------+
1 row in set (0.00 sec)

mysql&gt; SET max_error_count=1, sql_mode = '';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; ALTER TABLE t1 MODIFY b CHAR;
Query OK, 3 rows affected, 3 warnings (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 3

mysql&gt; SHOW WARNINGS;
+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Warning | 1263 | Data truncated for column 'b' at row 1 |
+---------+------+----------------------------------------+
1 row in set (0.00 sec)

mysql&gt; SELECT @@warning_count;
+-----------------+
| @@warning_count |
+-----------------+
|               3 |
+-----------------+
1 row in set (0.01 sec)</code></pre><p>
        To disable message storage, set
        <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> to 0. In this
        case, <a class="link" href="server-system-variables.html#sysvar_warning_count"><code class="literal">warning_count</code></a> still
        indicates how many warnings occurred, but messages are not
        stored and cannot be displayed.
      </p><p>
        The <a class="link" href="server-system-variables.html#sysvar_sql_notes"><code class="literal">sql_notes</code></a> system variable
        controls whether note messages increment
        <a class="link" href="server-system-variables.html#sysvar_warning_count"><code class="literal">warning_count</code></a> and whether the
        server stores them. By default,
        <a class="link" href="server-system-variables.html#sysvar_sql_notes"><code class="literal">sql_notes</code></a> is 1, but if set to
        0, notes do not increment
        <a class="link" href="server-system-variables.html#sysvar_warning_count"><code class="literal">warning_count</code></a> and the server
        does not store them:
      </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql&gt; SET sql_notes = 1;
mysql&gt; DROP TABLE IF EXISTS test.no_such_table;
Query OK, 0 rows affected, 1 warning (0.00 sec)
mysql&gt; SHOW WARNINGS;
+-------+------+------------------------------------+
| Level | Code | Message                            |
+-------+------+------------------------------------+
| Note  | 1051 | Unknown table 'test.no_such_table' |
+-------+------+------------------------------------+
1 row in set (0.00 sec)

mysql&gt; SET sql_notes = 0;
mysql&gt; DROP TABLE IF EXISTS test.no_such_table;
Query OK, 0 rows affected (0.00 sec)
mysql&gt; SHOW WARNINGS;
Empty set (0.00 sec)</code></pre><p>
        The MySQL server sends to each client a count indicating the
        total number of errors, warnings, and notes resulting from the
        most recent statement executed by that client. From the C API,
        this value can be obtained by calling
        <a class="ulink" href="https://dev.mysql.com/doc/c-api/5.7/en/mysql-warning-count.html" target="_top"><code class="literal">mysql_warning_count()</code></a>. See
        <a class="ulink" href="https://dev.mysql.com/doc/c-api/5.7/en/mysql-warning-count.html" target="_top">mysql_warning_count()</a>.
      </p><p>
        In the <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, you can enable and
        disable automatic warnings display using the
        <code class="literal">warnings</code> and <code class="literal">nowarning</code>
        commands, respectively, or their shortcuts,
        <code class="literal">\W</code> and <code class="literal">\w</code> (see
        <a class="xref" href="mysql-commands.html" title="4.5.1.2&nbsp;mysql Client Commands">Section&nbsp;4.5.1.2, “mysql Client Commands”</a>). For example:
      </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql&gt; \W
Show warnings enabled.
mysql&gt; SELECT 1/0;
+------+
| 1/0  |
+------+
| NULL |
+------+
1 row in set, 1 warning (0.03 sec)

Warning (Code 1365): Division by 0
mysql&gt; \w
Show warnings disabled.</code></pre>
</div>

<br>
        
</body>
</html>